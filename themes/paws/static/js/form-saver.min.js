/*! paws v1.4.2 | (c) 2019 Chris Ferdinandi | MIT License | http://github.com/pawsnewengland/paws */
!(function(e,t){"function"==typeof define&&define.amd?define([],t(e)):"object"==typeof exports?module.exports=t(e):e.formSaver=t(e)})("undefined"!=typeof global?global:this.window||this.global,(function(e){"use strict";var r,t,n={},o="querySelector"in document&&"addEventListener"in e&&"localStorage"in e&&"classList"in document.createElement("_"),m={selectorStatus:"[data-form-status]",selectorSave:"[data-form-save]",selectorDelete:"[data-form-delete]",selectorIgnore:"[data-form-no-save]",deleteClear:!0,saveMessage:"Saved!",deleteMessage:"Deleted!",saveClass:"",deleteClass:"",initClass:"js-form-saver",callbackSave:function(){},callbackDelete:function(){},callbackLoad:function(){}},d=function(e,t,o){if("[object Object]"===Object.prototype.toString.call(e))for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.call(o,e[a],a,e);else for(var r=0,n=e.length;r<n;r++)t.call(o,e[r],r,e)},f=function(){var o={},a=!1,e=0,t=arguments.length;"[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(a=arguments[0],e++);for(var r=function(e){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(a&&"[object Object]"===Object.prototype.toString.call(e[t])?o[t]=f(!0,o[t],e[t]):o[t]=e[t])};e<t;e++){r(arguments[e])}return o},v=function(e,t){for(Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(e){for(var t=(this.document||this.ownerDocument).querySelectorAll(e),o=t.length;0<=--o&&t.item(o)!==this;);return-1<o});e&&e!==document;e=e.parentNode)if(e.matches(t))return e;return null},p=function(e){return e&&"object"==typeof JSON&&"function"==typeof JSON.parse?JSON.parse(e):{}};n.saveForm=function(e,t,o,a){var r=p(e?e.getAttribute("data-options"):null),n=f(n||m,o||{},r),l=document.querySelector(t),s="formSaver-"+l.id,c={},i=l.elements,u=l.querySelectorAll(n.selectorStatus);d(i,(function(e){var t;v(t=e,n.selectorIgnore)||("radio"===t.type.toLowerCase()||"checkbox"===t.type.toLowerCase()?!0===t.checked&&(c[t.name+t.value]="on"):"hidden"!==t.type.toLowerCase()&&"submit"!==t.type.toLowerCase()&&t.value&&""!==t.value&&(c[t.name]=t.value))})),d(u,(function(e){var t,o,a;t=e,o=n.saveMessage,a=n.saveClass,t.innerHTML=""===a?"<div>"+o+"</div>":'<div class="'+a+'">'+o+"</div>"})),localStorage.setItem(s,JSON.stringify(c)),n.callbackSave(e,l)},n.deleteForm=function(e,t,o,a){var r=p(e?e.getAttribute("data-options"):{}),n=f(n||m,o||{},r),l=document.querySelector(t),s="formSaver-"+l.id,c=l.querySelectorAll(n.selectorStatus),i=""===n.deleteClass?"<div>"+n.deleteMessage+"</div>":'<div class="'+n.deleteClass+'">'+n.deleteMessage+"</div>";localStorage.removeItem(s),!0===n.deleteClear||"true"===n.deleteClear?(sessionStorage.setItem(s+"-formSaverMessage",i),location.reload(!1)):d(c,(function(e){e.innerHTML=i})),n.callbackDelete(e,l)},n.loadForm=function(e,t){var o=f(o||m,t||{}),a="formSaver-"+e.id,r=JSON.parse(localStorage.getItem(a)),n=e.elements,l=e.querySelectorAll(o.selectorStatus);d(n,(function(e){var t;t=e,r&&("radio"===t.type.toLowerCase()||"checkbox"===t.type.toLowerCase()?"on"===r[t.name+t.value]&&(t.checked=!0):"hidden"!==t.type.toLowerCase()&&"submit"!==t.type.toLowerCase()&&r[t.name]&&(t.value=r[t.name]))})),d(l,(function(e){e.innerHTML=sessionStorage.getItem(a+"-formSaverMessage"),sessionStorage.removeItem(a+"-formSaverMessage")})),o.callbackLoad(e)};var a=function(e){var t=e.target,o=v(t,r.selectorSave),a=v(t,r.selectorDelete);o?(e.preventDefault(),n.saveForm(o,o.getAttribute("data-form-save"),r)):a&&(e.preventDefault(),n.deleteForm(a,a.getAttribute("data-form-delete"),r))};return n.destroy=function(){r&&(document.documentElement.classList.remove(r.initClass),document.removeEventListener("click",a,!1),t=r=null)},n.init=function(e){o&&(n.destroy(),r=f(m,e||{}),t=document.forms,document.documentElement.className+=(document.documentElement.className?" ":"")+r.initClass,d(t,(function(e){n.loadForm(e,r)})),document.addEventListener("click",a,!1))},n}));